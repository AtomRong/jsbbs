<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8" />    
    <title>逸仙时空 Yat-sen Channel</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/argo-fileupload.css" rel="stylesheet">
    <script src="js/lib/jquery.js"></script>
    <script src="js/lib/jquery-ui.js"></script>
    <script src="js/lib/bootstrap.js"></script>
    <script src="data.js"></script>
    <script src="js/thinist.js"></script>
    <script src="js/lib/fileupload.js"></script>
    <link href="css/jquery.mCustomScrollbar.css" rel="stylesheet"
          type="text/css" />
  </head>
  <body>
    <div id="pop-title">
      <h3>上传文件</h3>
    </div>
    <div id="file-uploaded">
      <button class="filename-btn" data-submit="insert-file" data-args="1123.jpg">123.jpg</button>
    </div>
    <form id="new-post-form">
      <input type="hidden" name="boardname" value="linux">
      <input type="hidden" name="type" value="new"/>
      <div id="pop-content">
        <div class="editor">
          <div class="editor-group">
            <input type="file" name="attach" class="input-block-level"></input>
          </div>
          <div class="editor-group">
            <input name="title" class="input-block-level" type="text" placeholder="简要说明 ..." />
          </div>
          <div class="editor-group">
            <textarea name="content" rows="5" placeholder="补充说明..." class="input-block-level"></textarea>
          </div>
        </div>
      </div>
      <div id="pop-bar">
        <div>
          <button data-group="newpost" class="btn btn-success">开始上传</button>
        </div>
      </div>
    </form>
    <script>
      do_while_load(function(){
          $('#new-post-form').submit(function(e){
              e.preventDefault();
              $('#new-post-form').ajax_submit({
                  url: '/ajax/post/add',
                  type: 'POST',
                  success: function(data){
      
                      console.log(['s', data]);
                  },
                  progress: function(a, b){
                      console.log(['x', a, b]);
                  },
                  cache: false,
                  contentType: false,
                  processData: false
              });
          });
      });
    </script>
  </body>
</html>
